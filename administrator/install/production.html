

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Handling Production Load &mdash; Flyte 0.9.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Scaling Beyond Kubernetes" href="multi_cluster.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/flyte_lockup_on_dark.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Flyte Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User docs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Administrator Docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Installing Flyte</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Handling Production Load</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#flyte-configuration">Flyte Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#understanding-the-sandbox">Understanding the Sandbox</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-your-own-deployment">Creating Your Own Deployment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#going-beyond-the-sandbox">Going Beyond the Sandbox</a></li>
<li class="toctree-l4"><a class="reference internal" href="#production-grade-database">Production Grade Database</a></li>
<li class="toctree-l4"><a class="reference internal" href="#production-grade-object-store">Production Grade Object Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dynamically-configured-projects">Dynamically Configured Projects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="multi_cluster.html">Scaling Beyond Kubernetes</a></li>
<li class="toctree-l3"><a class="reference internal" href="optional_components.html">Optional Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="optional_components.html#data-catalog">Data Catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="managing_customizable_resources.html">Configuring customizable resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="configure/index.html">Configure Flyte backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="authentication.html">Authentication</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributor/index.html">Contributor Docs</a></li>
</ul>
<p class="caption"><span class="caption-text">Flyte User cookbook and examples (Github)</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lyft/flytesnacks/blob/master/README.md">FlyteSnacks - Examples &amp; Cookbook</a></li>
</ul>
<p class="caption"><span class="caption-text">Generated Documentation from Source</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../flytekit/index.html">Flytekit Python</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/spotify/flytekit-java">Flytekit JAVA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../flyteidl/index.html">Flyte Language and API specification</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pkg.go.dev/mod/github.com/lyft/flytepropeller">FlytePropeller</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pkg.go.dev/mod/github.com/lyft/flyteadmin">FlyteAdmin</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pkg.go.dev/mod/github.com/lyft/flyteplugins">FlytePlugins</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pkg.go.dev/mod/github.com/lyft/datacatalog">DataCatalog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Flyte</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Administrator Docs</a> &raquo;</li>
        
          <li><a href="index.html">Installing Flyte</a> &raquo;</li>
        
      <li>Handling Production Load</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/administrator/install/production.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="handling-production-load">
<span id="production"></span><h1>Handling Production Load<a class="headerlink" href="#handling-production-load" title="Permalink to this headline">¶</a></h1>
<p>In order to handle production load, you’ll want to replace the sandbox’s object store and PostgreSQL database with production grade storage systems. To do this, you’ll need to modify your Flyte configuration to remove the sandbox datastores and reference new ones.</p>
<div class="section" id="flyte-configuration">
<h2>Flyte Configuration<a class="headerlink" href="#flyte-configuration" title="Permalink to this headline">¶</a></h2>
<p>A Flyte deployment contains around 50 kubernetes resources.
The Flyte team has chosen to use the “kustomize” tool to manage these configs.
Take a moment to read the <a class="reference external" href="https://github.com/kubernetes-sigs/kustomize">kustomize docs</a>. Understanding kustomize will be important to modifying Flyte configurations.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">/kustomize</span></code> directory in the <a class="reference external" href="https://github.com/lyft/flyte/tree/master/kustomize">flyte repository</a> is designed for use with <code class="docutils literal notranslate"><span class="pre">kustomize</span></code> to tailor Flyte deployments to your needs.
Important subdirectories are described below.</p>
<dl class="simple">
<dt>base</dt><dd><p>The <a class="reference external" href="https://github.com/lyft/flyte/tree/master/kustomize/base">base directory</a> contains minimal configurations for each Flyte component.</p>
</dd>
<dt>dependencies</dt><dd><p>The <a class="reference external" href="https://github.com/lyft/flyte/tree/master/kustomize/dependencies">dependencies directory</a> contains deploy configurations for components like <code class="docutils literal notranslate"><span class="pre">PostgreSQL</span></code> that Flyte depends on.</p>
</dd>
</dl>
<p>These directories were designed so that you can modify them using <code class="docutils literal notranslate"><span class="pre">kustomize</span></code> to generate a custom Flyte deployment.
In fact, this is how we create the <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> deployment.</p>
<p>Understanding the sandbox deployment will help you to create your own custom deployments.</p>
</div>
<div class="section" id="understanding-the-sandbox">
<h2>Understanding the Sandbox<a class="headerlink" href="#understanding-the-sandbox" title="Permalink to this headline">¶</a></h2>
<p>The sandbox deployment is managed by a set of kustomize <a class="reference external" href="https://github.com/kubernetes-sigs/kustomize/blob/master/docs/glossary.md#overlay">overlays</a> that alter the <code class="docutils literal notranslate"><span class="pre">base</span></code> configurations to compose the sandbox deployment.</p>
<p>The sandbox overlays live in the <a class="reference external" href="https://github.com/lyft/flyte/tree/master/kustomize/overlays/sandbox">kustomize/overlays/sandbox</a> directory. There are overlays for each component, and a “flyte” overlay that aggregates the components into a single deploy file.</p>
<dl>
<dt><strong>Component Overlays</strong></dt><dd><p>For each modified component, there is an kustomize overlay at <code class="docutils literal notranslate"><span class="pre">kustomize/overlays/sandbox/{{</span> <span class="pre">component</span> <span class="pre">}}</span></code>.
The overlay will typically reference the <code class="docutils literal notranslate"><span class="pre">base</span></code> for that component, and modify it to the needs of the sandbox.</p>
<p>Using kustomize “patches”, we add or override specific configs from the <code class="docutils literal notranslate"><span class="pre">base</span></code> resources. For example, in the “console” overlay, we specify a patch in the <a class="reference external" href="https://github.com/lyft/flyte/blob/master/kustomize/overlays/sandbox/console/kustomization.yaml">kustomization.yaml</a>. This patch adds memory and cpu limits to the console deployment config.</p>
<p>Each Flyte component requires at least one configuration file. The configuration files for each component live in the component overlay. For example, the FlyteAdmin config lives at <a class="reference external" href="https://github.com/lyft/flyte/blob/master/kustomize/overlays/sandbox/admindeployment/flyteadmin_config.yaml">kustomize/overlays/sandbox/admindeployment/flyteadmin_config.yaml</a>. These files get included as Kubernetes configmaps and mounted into pods.</p>
</dd>
<dt><strong>Flyte Overlay</strong></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">flyte</span></code> overlay is meant to aggregate the components into a single deployment file.
The <a class="reference external" href="https://github.com/lyft/flyte/blob/master/kustomize/overlays/sandbox/flyte/kustomization.yaml">kustomization.yaml</a> in that directory lists the components to be included in the deploy.</p>
<p>We run <code class="docutils literal notranslate"><span class="pre">kustomize</span> <span class="pre">build</span></code> against the <code class="docutils literal notranslate"><span class="pre">flyte</span></code> directory to generate the complete <a class="reference external" href="https://github.com/lyft/flyte/blob/master/deployment/sandbox/flyte_generated.yaml">sandbox deployment yaml</a> we used earlier to deploy Flyte sandbox.</p>
</dd>
</dl>
</div>
<div class="section" id="creating-your-own-deployment">
<h2>Creating Your Own Deployment<a class="headerlink" href="#creating-your-own-deployment" title="Permalink to this headline">¶</a></h2>
<p>Before you create a custom deployment, you’ll need to <a class="reference external" href="https://github.com/kubernetes-sigs/kustomize#kustomize">install kustomize</a>.</p>
<p>The simplest way to create your own custom deployment is to clone the sandbox deploy and modify it to your liking.</p>
<dl class="simple">
<dt>NOTE:</dt><dd><p>This section is getting updated to use the new kustomize installation of Flyte. Link to kustomize</p>
</dd>
</dl>
<p>To do this, check out the <code class="docutils literal notranslate"><span class="pre">flyte</span></code> repo</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">lyft</span><span class="o">/</span><span class="n">flyte</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Copy the sandbox configuration to a new directory on your machine, and enter the new directory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="o">-</span><span class="n">r</span> <span class="n">flyte</span><span class="o">/</span><span class="n">kustomize</span><span class="o">/</span><span class="n">overlays</span><span class="o">/</span><span class="n">sandbox</span> <span class="n">my</span><span class="o">-</span><span class="n">flyte</span><span class="o">-</span><span class="n">deployment</span>
<span class="n">cd</span> <span class="n">my</span><span class="o">-</span><span class="n">flyte</span><span class="o">-</span><span class="n">deployment</span>
</pre></div>
</div>
<p>Since the <code class="docutils literal notranslate"><span class="pre">base</span></code> files are not in your local copy, you’ll need to make some slight modifications to reference the <code class="docutils literal notranslate"><span class="pre">base</span></code> files from our GitHub repository.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">find</span> <span class="o">.</span> <span class="o">-</span><span class="n">name</span> <span class="n">kustomization</span><span class="o">.</span><span class="n">yaml</span> <span class="o">-</span><span class="n">print0</span> <span class="o">|</span> <span class="n">xargs</span> <span class="o">-</span><span class="mi">0</span> <span class="n">sed</span> <span class="o">-</span><span class="n">i</span><span class="o">.</span><span class="n">bak</span> <span class="s1">&#39;s~../../../base~github.com/lyft/flyte/kustomize/base~&#39;</span>
<span class="n">find</span> <span class="o">.</span> <span class="o">-</span><span class="n">name</span> <span class="n">kustomization</span><span class="o">.</span><span class="n">yaml</span> <span class="o">-</span><span class="n">print0</span> <span class="o">|</span> <span class="n">xargs</span> <span class="o">-</span><span class="mi">0</span> <span class="n">sed</span> <span class="o">-</span><span class="n">i</span><span class="o">.</span><span class="n">bak</span> <span class="s1">&#39;s~../../../dependencies~github.com/lyft/flyte/kustomize/dependencies~&#39;</span>
<span class="n">find</span> <span class="o">.</span> <span class="o">-</span><span class="n">name</span> <span class="s1">&#39;*.bak&#39;</span> <span class="o">|</span> <span class="n">xargs</span> <span class="n">rm</span>
</pre></div>
</div>
<p>You should now be able to run kustomize against the <code class="docutils literal notranslate"><span class="pre">flyte</span></code> directory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kustomize</span> <span class="n">build</span> <span class="n">flyte</span> <span class="o">&gt;</span> <span class="n">flyte_generated</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>This will generate a deployment file identical to the sandbox deploy, and place it in a file called <code class="docutils literal notranslate"><span class="pre">flyte_generated.yaml</span></code></p>
</div>
<div class="section" id="going-beyond-the-sandbox">
<h2>Going Beyond the Sandbox<a class="headerlink" href="#going-beyond-the-sandbox" title="Permalink to this headline">¶</a></h2>
<p>Let’s modify the sandbox deployment to use cloud providers for the database and object store.</p>
</div>
<div class="section" id="production-grade-database">
<h2>Production Grade Database<a class="headerlink" href="#production-grade-database" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">FlyteAdmin</span></code> and <code class="docutils literal notranslate"><span class="pre">DataCatalog</span></code> components rely on PostgreSQL to store persistent records.</p>
<p>In this section, we’ll modify the Flyte deploy to use a remote PostgreSQL database instead.</p>
<p>First, you’ll need to set up a reliable PostgreSQL database. The easiest way achieve this is to use a cloud provider like AWS <a class="reference external" href="https://aws.amazon.com/rds/postgresql/">RDS</a>, GCP <a class="reference external" href="https://cloud.google.com/sql/docs/postgres/">Cloud SQL</a>, or Azure <a class="reference external" href="https://azure.microsoft.com/en-us/services/postgresql/">PostgreSQL</a> to manage the PostgreSQL database for you. Create one and make note of the username, password, endpoint, and port.</p>
<p>Next, remove old sandbox database by opening up the <code class="docutils literal notranslate"><span class="pre">flyte/kustomization.yaml</span></code> file and deleting database component.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">lyft</span><span class="o">/</span><span class="n">flyte</span><span class="o">/</span><span class="n">kustomize</span><span class="o">/</span><span class="n">dependencies</span><span class="o">/</span><span class="n">database</span>
</pre></div>
</div>
<p>With this line removed, you can re-run <code class="docutils literal notranslate"><span class="pre">kustomize</span> <span class="pre">build</span> <span class="pre">flyte</span> <span class="pre">&gt;</span> <span class="pre">flyte_generated.yaml</span></code> and see that the the postgres deployment has been removed from the <code class="docutils literal notranslate"><span class="pre">flyte_generated.yaml</span></code> file.</p>
<p>Now, let’s re-configure <code class="docutils literal notranslate"><span class="pre">FlyteAdmin</span></code> to use the new database.
Edit the <code class="docutils literal notranslate"><span class="pre">admindeployment/flyteadmin_config.yaml</span></code> file, and change the <code class="docutils literal notranslate"><span class="pre">storage</span></code> key like so</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">database</span><span class="p">:</span>
  <span class="n">host</span><span class="p">:</span> <span class="p">{{</span> <span class="n">your</span><span class="o">-</span><span class="n">database</span><span class="o">.</span><span class="n">endpoint</span> <span class="p">}}</span>
  <span class="n">port</span><span class="p">:</span> <span class="p">{{</span> <span class="n">your</span> <span class="n">database</span> <span class="n">port</span> <span class="p">}}</span>
  <span class="n">username</span><span class="p">:</span> <span class="p">{{</span> <span class="n">your_database_username</span> <span class="p">}}</span>
  <span class="n">password</span><span class="p">:</span> <span class="p">{{</span> <span class="n">your_database_password</span> <span class="p">}}</span>
  <span class="n">dbname</span><span class="p">:</span> <span class="n">flyteadmin</span>
</pre></div>
</div>
<p>Do the same thing in <code class="docutils literal notranslate"><span class="pre">datacatalog/datacatalog_config.yaml</span></code>, but use the dbname <code class="docutils literal notranslate"><span class="pre">datacatalog</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">database</span><span class="p">:</span>
  <span class="n">host</span><span class="p">:</span> <span class="p">{{</span> <span class="n">your</span><span class="o">-</span><span class="n">database</span><span class="o">.</span><span class="n">endpoint</span> <span class="p">}}</span>
  <span class="n">port</span><span class="p">:</span> <span class="p">{{</span> <span class="n">your</span> <span class="n">database</span> <span class="n">port</span> <span class="p">}}</span>
  <span class="n">username</span><span class="p">:</span> <span class="p">{{</span> <span class="n">your_database_username</span> <span class="p">}}</span>
  <span class="n">password</span><span class="p">:</span> <span class="p">{{</span> <span class="n">your_database_password</span> <span class="p">}}</span>
  <span class="n">dbname</span><span class="p">:</span> <span class="n">datacatalog</span>
</pre></div>
</div>
<p>Note: <em>You can mount the database password into the pod and use the “passwordPath” config to point to a file on disk instead of specifying the password here</em></p>
<p>Next, remove the “check-db-ready” init container from <a class="reference external" href="https://github.com/lyft/flyte/blob/master/kustomize/overlays/sandbox/admindeployment/admindeployment.yaml#L10-L14">admindeployment/admindeployment.yaml</a>. This check is no longer needed.</p>
</div>
<div class="section" id="production-grade-object-store">
<h2>Production Grade Object Store<a class="headerlink" href="#production-grade-object-store" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">FlyteAdmin</span></code>, <code class="docutils literal notranslate"><span class="pre">FlytePropeller</span></code>, and <code class="docutils literal notranslate"><span class="pre">DataCatalog</span></code> components rely on an Object Store to hold files.</p>
<p>In this section, we’ll modify the Flyte deploy to use <a class="reference external" href="https://aws.amazon.com/s3/">AWS S3</a> for object storage.
The process for other cloud providers like <a class="reference external" href="https://cloud.google.com/storage/">GCP GCS</a> should be similar.</p>
<p>To start, <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/gsg/CreatingABucket.html">create an s3 bucket</a>.</p>
<p>Next, remove the old sandbox object store by opening up the <code class="docutils literal notranslate"><span class="pre">flyte/kustomization.yaml</span></code> file and deleting the storage line.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">lyft</span><span class="o">/</span><span class="n">flyte</span><span class="o">/</span><span class="n">kustomize</span><span class="o">/</span><span class="n">dependencies</span><span class="o">/</span><span class="n">storage</span>
</pre></div>
</div>
<p>With this line gone, you can re-run <code class="docutils literal notranslate"><span class="pre">kustomize</span> <span class="pre">build</span> <span class="pre">flyte</span> <span class="pre">&gt;</span> <span class="pre">flyte_generated.yaml</span></code> and see that the sandbox object store has been removed from the <code class="docutils literal notranslate"><span class="pre">flyte_generated.yaml</span></code> file.</p>
<p>Next, open the configs <code class="docutils literal notranslate"><span class="pre">admindeployment/flyteadmin_config.yaml</span></code>, <code class="docutils literal notranslate"><span class="pre">propeller/config.yaml</span></code>, <code class="docutils literal notranslate"><span class="pre">datacatalog/datacatalog_config.yaml</span></code> and look for the <code class="docutils literal notranslate"><span class="pre">storage</span></code> configuration.</p>
<p>Change the <code class="docutils literal notranslate"><span class="pre">storage</span></code> configuration in each of these configs to use your new s3 bucket like so</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">storage</span><span class="p">:</span>
  <span class="nb">type</span><span class="p">:</span> <span class="n">s3</span>
  <span class="n">container</span><span class="p">:</span> <span class="p">{{</span> <span class="n">YOUR</span><span class="o">-</span><span class="n">S3</span><span class="o">-</span><span class="n">BUCKET</span> <span class="p">}}</span>
  <span class="n">connection</span><span class="p">:</span>
    <span class="n">auth</span><span class="o">-</span><span class="nb">type</span><span class="p">:</span> <span class="n">accesskey</span>
    <span class="n">access</span><span class="o">-</span><span class="n">key</span><span class="p">:</span> <span class="p">{{</span> <span class="n">YOUR_AWS_ACCESS_KEY</span> <span class="p">}}</span>
    <span class="n">secret</span><span class="o">-</span><span class="n">key</span><span class="p">:</span> <span class="p">{{</span> <span class="n">YOUR_AWS_SECRET_KEY</span> <span class="p">}}</span>
    <span class="n">region</span><span class="p">:</span> <span class="p">{{</span> <span class="n">YOUR</span><span class="o">-</span><span class="n">AWS</span><span class="o">-</span><span class="n">REGION</span> <span class="p">}}</span>
</pre></div>
</div>
<p>Note: <em>To use IAM roles for authentication, switch to the “iam” auth-type.</em></p>
<p>Next, open <code class="docutils literal notranslate"><span class="pre">propeller/plugins/config.yaml</span></code> and remove the <a class="reference external" href="https://github.com/lyft/flyte/blob/master/kustomize/overlays/sandbox/propeller/plugins/config.yaml#L13-L15">default-env-vars</a> (no need to replace them, the default behavior is sufficient).</p>
<p>Now if you re-run <code class="docutils literal notranslate"><span class="pre">kustomize</span> <span class="pre">build</span> <span class="pre">flyte</span> <span class="pre">&gt;</span> <span class="pre">flyte_generated.yaml</span></code>, you should see that the configmaps have been updated.</p>
<p>Run <code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">apply</span> <span class="pre">-f</span> <span class="pre">flyte_generated.yaml</span></code> to deploy these changes to your cluster for a production-ready deployment.</p>
</div>
<div class="section" id="dynamically-configured-projects">
<h2>Dynamically Configured Projects<a class="headerlink" href="#dynamically-configured-projects" title="Permalink to this headline">¶</a></h2>
<p>As your Flyte user-base evolves, adding new projects is as simple as registering them through the cli</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flyte</span><span class="o">-</span><span class="n">cli</span> <span class="o">-</span><span class="n">h</span> <span class="p">{{</span> <span class="n">your</span><span class="o">-</span><span class="n">flyte</span><span class="o">-</span><span class="n">admin</span><span class="o">-</span><span class="n">host</span><span class="o">.</span><span class="n">com</span> <span class="p">}}</span> <span class="n">register</span><span class="o">-</span><span class="n">project</span> <span class="o">--</span><span class="n">identifier</span> <span class="n">myuniqueworkflow</span> <span class="o">--</span><span class="n">name</span> <span class="n">FriendlyWorkflowName</span>
</pre></div>
</div>
<p>A cron which runs at the cadence specified in flyteadmin config will ensure that all the kubernetes resources necessary for the new project are created and new workflows can successfully
be registered and executed under the new project.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="multi_cluster.html" class="btn btn-neutral float-right" title="Scaling Beyond Kubernetes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Flyte Authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>